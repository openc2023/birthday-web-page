<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>é€ç»™æ°¸è¿œ18å²çš„æœµæ‹‰</title>
<style>
:root{
  --brand:#e85d6a; --brand-2:#ff9aa2; --ink:#222; --muted:#6b7280; --paper:#ffffff;
  --bg:#0c0f13; --card:#ffffffcc; --ring:rgba(0,0,0,.06);
}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:#f6f7fb;color:var(--ink);font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Inter,"PingFang SC","Hiragino Sans GB","Noto Sans SC","Microsoft YaHei",sans-serif;line-height:1.6}
a{color:inherit;text-decoration:none}
.container{width:min(1100px,92vw);margin:0 auto}

/* é¡¶éƒ¨å¯¼èˆª */
.nav{position:sticky;top:0;z-index:50;background:rgba(255,255,255,.85);backdrop-filter:saturate(180%) blur(18px);border-bottom:1px solid #eee}
.nav .wrap{display:flex;align-items:center;gap:18px;padding:14px 10px}
.brand{font-weight:700}
.nav ul{display:flex;gap:18px;margin:0 0 0 auto;padding:0;list-style:none}
.nav a{padding:8px 10px;border-radius:8px}
.nav a:hover{background:var(--ring)}
/* æ±‰å ¡èœå•æŒ‰é’® */
.hamburger{display:none;background:none;border:none;font-size:24px;cursor:pointer;margin-left:auto}
/* ç§»åŠ¨ç«¯å¯¼èˆªèœå• */
.mobile-nav{display:none;position:fixed;top:60px;left:0;right:0;background:#fff;box-shadow:0 8px 20px rgba(0,0,0,.1);z-index:49}
.mobile-nav.show{display:block}
.mobile-nav ul{display:flex;flex-direction:column;gap:0;padding:0;margin:0}
.mobile-nav li{border-bottom:1px solid #eee}
.mobile-nav a{display:block;padding:16px 20px}

/* å°é¢è½®æ’­ */
.hero{position:relative;height:78vh;min-height:520px;display:grid;place-items:center;color:#fff;overflow:hidden;background:#000}
.slide{position:absolute;inset:0;opacity:0;transition:opacity .6s ease}
.slide.active{opacity:1}
.slide .bg{position:absolute;inset:0;background-position:center;background-size:cover;filter:brightness(.65)}
.slide .shade{position:absolute;inset:0;background:radial-gradient(ellipse at center,rgba(0,0,0,.1),rgba(0,0,0,.6))}
.hero .content{position:relative;z-index:2;text-align:center;padding:0 6vw}
.hero h1{font-size:clamp(22px,3.5vw,40px);margin:.2em 0 .4em}
.hero p{opacity:.95;font-size:clamp(14px,2.2vw,18px)}
.hero .cta{margin-top:18px;display:inline-block;background:var(--brand);color:#fff;padding:12px 18px;border-radius:999px;box-shadow:0 8px 16px rgba(232,93,106,.25)}
.hero .cta:hover{filter:brightness(1.05)}
.arrow{position:absolute;top:50%;transform:translateY(-50%);width:44px;height:44px;border-radius:50%;display:grid;place-items:center;background:rgba(255,255,255,.2);backdrop-filter:blur(6px);cursor:pointer}
.arrow:hover{background:rgba(255,255,255,.28)}
.arrow.left{left:14px} .arrow.right{right:14px}
.dots{position:absolute;top:16px;left:50%;transform:translateX(-50%);display:flex;gap:8px}
.dot{width:8px;height:8px;border-radius:50%;background:rgba(255,255,255,.45)}
.dot.active{background:#fff}

/* è®¡æ•°æ¡ */
.stats{background:#f8f9fa;color:#495057;padding:38px 0}
.stats .grid{display:grid;grid-template-columns:repeat(4,minmax(0,1fr));gap:22px}
.stat{display:flex;flex-direction:column;align-items:center;gap:6px;background:#ffffff;border:1px solid #e9ecef;padding:20px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,.04)}
.stat .num{font-size:36px;font-weight:800;letter-spacing:1px;color:#ff8fab}
.stat .label{opacity:.9;color:#495057}

/* åˆ†èŠ‚æ ‡é¢˜ */
.section{padding:56px 0}
.section h2{font-size:28px;text-align:center;margin:0 0 6px}
.section .sub{color:var(--muted);text-align:center;margin-bottom:22px}
.hr{width:72px;height:4px;background:var(--brand);margin:8px auto 24px;border-radius:6px}

/* æƒ³å¯¹ä½ è¯´ï¼ˆå¡ç‰‡ï¼‰ */
.cards{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:18px}
.card{background:var(--paper);border-radius:14px;box-shadow:0 8px 20px rgba(10,10,10,.06);padding:18px;height:220px;display:flex;align-items:end;background-size:cover;background-position:center;position:relative;overflow:hidden}
.card::after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,transparent 45%,rgba(0,0,0,.45))}
.card .txt{position:relative;color:#fff;font-weight:600}

/* å›¾é›† + å¹´ä»½ç­›é€‰ */
.filters{display:flex;gap:10px;justify-content:center;margin-bottom:18px;flex-wrap:wrap}
.filter{border:1px solid #e5e7eb;background:#fff;padding:8px 12px;border-radius:999px;cursor:pointer}
.filter.active{background:var(--brand);border-color:var(--brand);color:#fff}
.gallery{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:12px}
.gallery img{width:100%;height:170px;object-fit:cover;border-radius:10px}

/* å…³äºæˆ‘ä»¬ï¼ˆæ—¶é—´çº¿å®«æ ¼ï¼‰ */
.timeline{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:18px}
.ti{background:#fff;border-radius:14px;padding:16px;border:1px solid #eee}
.ti h4{margin:0 0 6px}
.ti .y{font-weight:700;color:#334155}
.ti p{margin:0;color:#475569}

/* æ–‡æ¡ˆä¸‰æ  */
.columns{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:18px}
.col{background:#fff;border-radius:14px;padding:18px;border:1px solid #eee}

/* å…³äºé¡µé¢+BGMåŒº */
.banner{position:relative;margin-top:22px;border-radius:16px;overflow:hidden;background:#111;color:#fff}
.banner .bg{position:absolute;inset:0;background:linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);filter:brightness(1)}
.banner .grid{position:relative;display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:20px;padding:28px}
.banner h3{margin:0 0 6px}

/* å½©è›‹æŒ‰é’®/å¼¹å±‚ */
.egg-btn{position:fixed;right:14px;bottom:86px;z-index:40;background:var(--brand);color:#fff;border:none;border-radius:999px;padding:12px 14px;box-shadow:0 10px 18px rgba(232,93,106,.3);cursor:pointer}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;z-index:60}
.modal.show{display:flex}
.modal .box{width:min(520px,92vw);background:#fff;border-radius:16px;padding:20px;box-shadow:0 20px 60px rgba(0,0,0,.25);text-align:center}
.modal .box h3{margin-top:0}

/* åº•éƒ¨æ’­æ”¾å™¨ */
.player{position:fixed;left:0;right:0;bottom:0;background:#f8f9fa;color:#333;border-top:1px solid #e9ecef;z-index:55}
.player .wrap{display:flex;align-items:center;gap:12px;padding:10px 14px}
.btn{background:#e9ecef;border:1px solid #dee2e6;color:#495057;border-radius:10px;padding:8px 12px;cursor:pointer}
.time{margin-left:auto;font-variant-numeric:tabular-nums}
.progress{appearance:none;width:36vw;min-width:160px}
.progress::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background:var(--brand);cursor:pointer}
.progress::-webkit-slider-runnable-track{height:6px;border-radius:3px;background:#dee2e6}
.progress::-moz-range-thumb{width:16px;height:16px;border-radius:50%;background:var(--brand);cursor:pointer;border:none}
.progress::-moz-range-track{height:6px;border-radius:3px;background:#dee2e6;border:none}
@media (max-width:960px){
  .stats .grid{grid-template-columns:repeat(2,1fr)}
  .cards{grid-template-columns:1fr 1fr}
  .gallery{grid-template-columns:1fr 1fr}
  .timeline{grid-template-columns:1fr 1fr}
  .columns{grid-template-columns:1fr}
  .banner .grid{grid-template-columns:repeat(2,1fr)}
}
@media (max-width:560px){
  .nav ul{display:none}
  .hamburger{display:block}
  .cards{grid-template-columns:1fr}
  .gallery{grid-template-columns:1fr}
  .timeline{grid-template-columns:1fr}
  .banner .grid{grid-template-columns:1fr}
}
</style>
</head>
<body>

<!-- é¡¶éƒ¨å¯¼èˆª -->
<nav class="nav">
  <div class="container wrap">
    <div class="brand">é€ç»™æ°¸è¿œ18å²çš„æœµæ‹‰</div>
    <ul>
      <li><a href="#home">é¦–é¡µ</a></li>
      <li><a href="#pretty">æ€ä¹ˆèƒ½è¿™ä¹ˆæ¼‚äº®</a></li>
      <li><a href="#about">å…³äºæˆ‘ä»¬</a></li>
      <li><a href="#words">æƒ³å¯¹ä½ è¯´</a></li>
      <li><a href="#more">å…³äºè¿™ä¸ªç½‘é¡µ</a></li>
    </ul>
    <button class="hamburger" id="hamburger">â˜°</button>
  </div>
</nav>

<!-- ç§»åŠ¨ç«¯å¯¼èˆªèœå• -->
<div class="mobile-nav" id="mobileNav">
  <ul>
    <li><a href="#home">é¦–é¡µ</a></li>
    <li><a href="#pretty">æ€ä¹ˆèƒ½è¿™ä¹ˆæ¼‚äº®</a></li>
    <li><a href="#about">å…³äºæˆ‘ä»¬</a></li>
    <li><a href="#words">æƒ³å¯¹ä½ è¯´</a></li>
    <li><a href="#more">å…³äºè¿™ä¸ªç½‘é¡µ</a></li>
  </ul>
</div>

<!-- å°é¢è½®æ’­ -->
<header id="home" class="hero">
  <div class="dots" id="dots"></div>
  <div class="arrow left" id="prev">â€¹</div>
  <div class="arrow right" id="next">â€º</div>
  <div class="content">
    <h1 id="hero-title">æœªçŸ¥çš„æœªæ¥é‡Œï¼Œç„¶è€Œæ­¤åˆ»æ‹¥æœ‰ä½ </h1>
    <p id="hero-sub">æŸä¸€å¤© æŸä¸€åˆ» æŸæ¬¡å‘¼å¸ æˆ‘ä»¬ç»ˆå°†å†åˆ†ç¦»</p>
    <a href="#stats" class="cta" id="unlock">ç‚¹ç‚¹æˆ‘å§</a>
    <p style="opacity:.8;margin-top:8px">ï¼ˆç‚¹å‡»ä»¥è§£é”éŸ³ä¹æ’­æ”¾ï¼‰</p>
  </div>
  <!-- slides åŠ¨æ€æ’å…¥ -->
</header>

<!-- è®¡æ•°æ¡ -->
<section class="stats" id="stats">
  <div class="container">
    <div class="grid">
      <div class="stat"><div class="num" data-start-date="2017-07-11">0</div><div class="label">å¤©ç›¸è¯†</div></div>
      <div class="stat"><div class="num" data-to="1">0</div><div class="label">æ¬¡å‡ºå»ç©</div></div>
      <div class="stat"><div class="num" data-to="1">0</div><div class="label">æ¬¡ç”Ÿæ—¥</div></div>
      <div class="stat"><div class="num" data-to="2000">0</div><div class="label">å…¬é‡Œçš„è·ç¦»</div></div>
    </div>
  </div>
</section>

<!-- å›¾é›† + å¹´ä»½ç­›é€‰ -->
<section id="pretty" class="section container">
  <h2>æ€ä¹ˆèƒ½è¿™ä¹ˆæ¼‚äº®</h2><div class="hr"></div>
  <p class="sub">ï¼ˆä¸å¤ªä¼šæŒ‘ç…§ç‰‡ğŸ˜‚ï¼‰</p>
  <div class="filters" id="filters">
    <button class="filter active" data-year="all">å…¨éƒ¨</button>
  </div>
  <div class="gallery" id="gallery">
    <!-- data-year æŒ‰é’®ç­›é€‰ -->
    <img src="assets/img/photos/g1.jpg" data-year="2022" alt="">
    <img src="assets/img/photos/g2.jpg" data-year="2021" alt="">
    <img src="assets/img/photos/g3.jpg" data-year="2021" alt="">
    <img src="assets/img/photos/g4.jpg" data-year="2020" alt="">
    <img src="assets/img/photos/g5.jpg" data-year="2022" alt="">
    <img src="assets/img/photos/g6.jpg" data-year="2020" alt="">
  </div>
</section>

<!-- å…³äºæˆ‘ä»¬ï¼ˆæ—¶é—´çº¿å®«æ ¼ï¼‰ -->
<section id="about" class="section container">
  <h2>å…³äºæˆ‘ä»¬</h2><div class="hr"></div>
  <p class="sub">è¦è¯´æˆ‘ä»¬æ€ä¹ˆè®¤è¯†çš„ã€æ€ä¹ˆç†Ÿèµ·æ¥çš„ï¼Œå°±åœ¨è¿™é‡Œã€‚</p>
  <div class="timeline">
    <div class="ti"><h4><span class="y">2017</span></h4><p>åˆæ¬¡ç›¸è¯†ï¼Œç¼˜åˆ†çš„å¼€ç«¯ï¼ˆfrom Doraemonï¼‰ã€‚</p></div>
    <div class="ti"><h4><span class="y">2020</span></h4><p>é€æ¸ç†Ÿç»œï¼Œé’æ¶©ä¸æ€¦ç„¶å¿ƒåŠ¨ã€‚</p></div>
    <div class="ti"><h4><span class="y">2021</span></h4><p>æ–­æ–­ç»­ç»­ï¼Œå´å§‹ç»ˆæ²¡æœ‰æ–­æ‰ç‰µæŒ‚ã€‚</p></div>
    <div class="ti"><h4><span class="y">2024</span></h4><p>å¿™ç¢Œï¼Œä½†æ˜¯å¾ˆæƒ³å¿µã€‚</p></div>
    <div class="ti"><h4><span class="y">2025</span></h4><p>è™½ç„¶å‘ç”Ÿäº†å¾ˆå¤šäº‹æƒ…ï¼Œä½†æ˜¯å¾ˆå¹¸è¿é‡åˆ°ä½ ï¼</p></div>
    <div class="ti"><h4><span class="y">æœªæ¥</span></h4><p>å¸Œæœ›ä½ æ¯å¤©å¼€å¼€å¿ƒå¿ƒã€‚</p></div>
  </div>
</section>

<!-- æƒ³å¯¹ä½ è¯´ï¼ˆä¸‰æ æ–‡æ¡ˆ + é¡¶éƒ¨ä¸‰æ æ®µè½ï¼‰ -->
<section id="words" class="section container">
  <h2>æƒ³å¯¹ä½ è¯´</h2><div class="hr"></div>
  <p class="sub">è¯´ä¸€äº›æƒ³è¯´çš„ï¼Œç¢ç¢å¿µä¹Ÿæµªæ¼«ã€‚</p>

  <div class="columns" style="margin-bottom:22px">
    <div class="col">ä»2017åˆ°2025ï¼Œå…«å¹´æ—¶å…‰ï¼Œé£é£é›¨é›¨ï¼Œè¿™ä»½æ„Ÿæƒ…å€¼å¾—æˆ‘ä»¬å¥½å¥½çæƒœã€‚</div>
    <div class="col">åˆ†åˆ«çš„æ¬¡æ•°å’Œç›¸é‡çš„æ¬¡æ•°æ€»æ˜¯ç›¸ç­‰çš„ï¼Œä½†å¯¹äºæˆ‘ä»¬æ¥è¯´ï¼Œæ¯æ¬¡ç›¸é‡éƒ½å€¼å¾—æœŸå¾…ã€‚</div>
    <div class="col">è¿™ä»½ç¤¼ç‰©ä¸å¤Ÿè´µï¼Œä½†å®ƒç¡®å®å¾ˆçœŸè¯šã€‚</div>
  </div>


</section>

<!-- å…³äºè¿™ä¸ªç½‘é¡µ + BGM + å½©è›‹æç¤º -->
<section id="more" class="section container">
  <div class="banner">
    <div class="bg" style="background-image:url(assets/img/background/sunset.jpg)"></div>
    <div class="grid">
      <div>
        <h3>å…³äºè¿™ä¸ªç½‘é¡µ</h3>
        <p>å†™äº†å¥½å¤šè¡Œä»£ç ï¼Œå‡º bug ä¹Ÿä¸æ€•ï¼Œåªæƒ³è®©ä½ å–œæ¬¢ã€‚</p>
      </div>
      <div>
        <h3>å¬å¬æ­Œå§</h3>
        <p>è¿™æ˜¯æˆ‘ä¸€ç”Ÿä¸­æœ€å‹‡æ•¢çš„ç¬é—´ã€‚ä½ è¦å¦‚ä½•ï¼Œæˆ‘ä»¬å°±å¦‚ä½•ã€‚</p>
      </div>
      <div>
        <h3>æœ€å</h3>
        <p>æ„¿å›ç”Ÿç¾½ç¿¼ï¼Œé•¿ç©ºè‡ªåœ¨æ¸¸ï¼›ä¸€åŒ–åŒ—å†¥é±¼ï¼Œä¸‡é¡·è¸äº‘æµã€‚</p>
      </div>

    </div>
  </div>
</section>

<!-- å½©è›‹æŒ‰é’® -->
<button class="egg-btn" id="egg">ğŸ å½©è›‹</button>
<div class="modal" id="modal">
  <div class="box">
    <h3>ç»™ä½ çš„å°å½©è›‹</h3>
    <p>ç‚¹å¼€å°±è¯´æ˜ä½ è®¤çœŸçœ‹å®Œå•¦ï¼šï¼‰</p>
    <audio id="egg-audio" src="assets/audio/egg.mp3" preload="auto" controls style="width:100%"></audio>
    <div style="margin-top:12px"><button class="btn" id="close-modal">æ”¶ä¸‹å•¦</button></div>
  </div>
</div>

<!-- åº•éƒ¨æ’­æ”¾å™¨ -->
<footer class="player">
  <div class="wrap container">
    <button class="btn" id="play">æ’­æ”¾</button>
    <div id="song">æ­£åœ¨æ’­æ”¾</div>
    <input type="range" min="0" max="100" value="0" class="progress" id="progress">
    <div class="time"><span id="cur">00:00</span> / <span id="dur">00:00</span></div>
  </div>
</footer>

<!-- éŸ³é¢‘ -->
<audio id="bgm" src="assets/audio/bgm.mp3" preload="auto"></audio>

<script>
/* --------- å¯æ›¿æ¢çš„æ•°æ® --------- */
// æç¤ºï¼šè¯·å°†å›¾ç‰‡æ”¾å…¥å¯¹åº”çš„ç›®å½•
const HERO_SLIDES = [
  {img:'assets/img/background/hero1.jpg', title:'Happy Birthday', sub:'æ„¿ä½ æ°¸è¿œå¿«ä¹ï¼Œä¸åªç”Ÿæ—¥ï¼Œè€Œæ˜¯ç”Ÿå‘½ä¸­çš„æ¯ä¸€å¤©'},
  {img:'assets/img/background/hero2.jpg', title:'æœªçŸ¥çš„æœªæ¥é‡Œï¼Œç„¶è€Œæ­¤åˆ»æ‹¥æœ‰ä½ ', sub:'ä»2017åˆ°2025ï¼Œè¿™æ®µè·¯ï¼Œè°¢è°¢ä½ ä¸€ç›´åœ¨ã€‚'},
  {img:'assets/img/background/hero3.jpg', title:'æŸä¸€å¤© æŸä¸€åˆ» æŸæ¬¡å‘¼å¸', sub:'æ„Ÿè°¢ç›¸é‡ï¼Œè®©æˆ‘ä»¬æˆä¸ºå½¼æ­¤ç”Ÿå‘½ä¸­çš„å…‰'},
];

/* --------- è½®æ’­ --------- */
const hero = document.querySelector('.hero');
const dotsBox = document.getElementById('dots');
let idx=0;
HERO_SLIDES.forEach((s,i)=>{
  const d=document.createElement('div'); d.className='dot'+(i===0?' active':''); dotsBox.appendChild(d);
  const el=document.createElement('div'); el.className='slide'+(i===0?' active':'');
  el.innerHTML=`<div class="bg" style="background-image:url(${s.img})"></div><div class="shade"></div>`;
  hero.appendChild(el);
});
const slides=[...document.querySelectorAll('.slide')];
const dots=[...document.querySelectorAll('.dot')];
const setSlide=i=>{
  slides[idx].classList.remove('active'); dots[idx].classList.remove('active');
  idx=(i+slides.length)%slides.length;
  slides[idx].classList.add('active'); dots[idx].classList.add('active');
  document.getElementById('hero-title').textContent=HERO_SLIDES[idx].title;
  document.getElementById('hero-sub').textContent=HERO_SLIDES[idx].sub;
};
document.getElementById('prev').onclick=()=>setSlide(idx-1);
document.getElementById('next').onclick=()=>setSlide(idx+1);
dots.forEach((d,i)=>d.onclick=()=>setSlide(i));
setInterval(()=>setSlide(idx+1), 8000);

/* --------- å¹³æ»‘è·³è½¬ --------- */
document.querySelectorAll('a[href^="#"]').forEach(a=>{
  a.addEventListener('click',e=>{
    const id=a.getAttribute('href'); if(id.length>1){ e.preventDefault(); document.querySelector(id).scrollIntoView({behavior:'smooth'}); }
  })
});

/* --------- æ’­æ”¾å™¨ & iOS è§£é” --------- */
const audio=document.getElementById('bgm');
const btnPlay=document.getElementById('play');
const unlock=document.getElementById('unlock');
const cur=document.getElementById('cur'), dur=document.getElementById('dur'), bar=document.getElementById('progress');

const fmt=s=>{const m=Math.floor(s/60).toString().padStart(2,'0');const t=Math.floor(s%60).toString().padStart(2,'0');return `${m}:${t}`};
const update=()=>{
  bar.value = audio.duration? Math.floor(audio.currentTime/audio.duration*100) : 0;
  cur.textContent=fmt(audio.currentTime||0);
  dur.textContent=fmt(audio.duration||0);
};
btnPlay.onclick= async ()=>{
  if(audio.paused){ try{ await audio.play(); btnPlay.textContent='æš‚åœ'; }catch(e){ /* å¯èƒ½æœªè§£é” */ } }
  else {audio.pause(); btnPlay.textContent='æ’­æ”¾'}
};
unlock.onclick= async ()=>{
  try{ await audio.play(); btnPlay.textContent='æš‚åœ'; }catch(e){}
};
audio.addEventListener('timeupdate',update);
audio.addEventListener('loadedmetadata',update);
bar.oninput=()=>{ if(audio.duration){ audio.currentTime = bar.value/100*audio.duration; } };

/* --------- è®¡ç®—ä¸¤ä¸ªæ—¥æœŸä¹‹é—´çš„å¤©æ•° --------- */
function calculateDaysBetweenDates(startDateString) {
  const startDate = new Date(startDateString);
  const endDate = new Date();
  const timeDifference = endDate - startDate;
  const daysDifference = Math.floor(timeDifference / (1000 * 60 * 60 * 24));
  return daysDifference;
}

/* --------- è®¡æ•°åŠ¨ç”» --------- */
const observer=new IntersectionObserver(es=>{
  es.forEach(e=>{
    if(e.isIntersecting){
      const n=e.target.querySelector('.num'); 
      let to;
      
      // æ£€æŸ¥æ˜¯å¦æœ‰èµ·å§‹æ—¥æœŸå±æ€§ï¼Œå¦‚æœæœ‰åˆ™è®¡ç®—å¤©æ•°
      if(n.dataset.startDate) {
        to = calculateDaysBetweenDates(n.dataset.startDate);
      } else {
        to = parseInt(n.dataset.to,10);
      }
      
      let v=0; const step=Math.max(1,Math.ceil(to/60));
      const timer=setInterval(()=>{ v+=step; if(v>=to){v=to;clearInterval(timer)} n.textContent=v },20);
      observer.unobserve(e.target);
    }
  })
},{threshold:.4});
document.querySelectorAll('.stat').forEach(s=>observer.observe(s));

/* --------- å›¾é›†ç­›é€‰ï¼ˆç®€åŒ–ç‰ˆï¼Œä»…ä¿ç•™å…¨éƒ¨æŒ‰é’®ï¼‰ --------- */
const filterBtn=document.querySelector('.filter');
filterBtn.onclick=()=>{
  filterBtn.classList.add('active'); // ä¿æŒæ¿€æ´»çŠ¶æ€
};

// ç¡®ä¿æ‰€æœ‰å›¾ç‰‡å§‹ç»ˆæ˜¾ç¤º
const pics=[...document.querySelectorAll('#gallery img')];
pics.forEach(img=>{
  img.style.display = 'block';
});

/* --------- å½©è›‹å¼¹å±‚ --------- */
const modal=document.getElementById('modal'), egg=document.getElementById('egg'), closeM=document.getElementById('close-modal'), eggAudio=document.getElementById('egg-audio');

eggAudio.onerror=()=>{
  // éŸ³é¢‘åŠ è½½é”™è¯¯å¤„ç†
  const audioError = document.createElement('p');
  audioError.style.color='var(--brand)';
  audioError.textContent='è¯·æ·»åŠ å®é™…çš„éŸ³é¢‘æ–‡ä»¶åˆ° assets/audio/ ç›®å½•';
  document.querySelector('.modal .box').appendChild(audioError);
};

egg.onclick=()=>{ modal.classList.add('show'); audio.volume=.4; }
closeM.onclick=()=>{ modal.classList.remove('show'); audio.volume=1; eggAudio.pause(); eggAudio.currentTime=0; }
modal.addEventListener('click',e=>{ if(e.target===modal) closeM.click(); });

/* --------- æœ¬åœ°å­˜å‚¨ã€Œå·²æ‰“å¼€ã€å¾½è®°ï¼ˆå¯æ‰©å±•ï¼‰ --------- */
try{
  if(!localStorage.getItem('opened')){ localStorage.setItem('opened', Date.now()); }
}catch(err){}
</script>
<script>
    // æ±‰å ¡èœå•äº¤äº’é€»è¾‘
    const hamburger = document.getElementById('hamburger');
    const mobileNav = document.getElementById('mobileNav');
    
    hamburger.addEventListener('click', function() {
      mobileNav.classList.toggle('show');
    });
    
    // ç‚¹å‡»å¯¼èˆªé¡¹åå…³é—­èœå•
    document.querySelectorAll('.mobile-nav a').forEach(link => {
      link.addEventListener('click', function() {
        mobileNav.classList.remove('show');
      });
    });
    
    // ç‚¹å‡»é¡µé¢å…¶ä»–åœ°æ–¹å…³é—­èœå•
    document.addEventListener('click', function(event) {
      if (!hamburger.contains(event.target) && !mobileNav.contains(event.target)) {
        mobileNav.classList.remove('show');
      }
    });
  </script>
  </body>
</html>
